<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Comprador - Sistema de Gestão de Propostas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            min-height: 100vh;
            color: #333;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #e1e5e9;
            background: #0d7377;
            color: white;
        }

        .sidebar-header .logo {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .sidebar-header h2 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .nav-section {
            padding: 20px 0;
        }

        .nav-section h3 {
            padding: 0 20px 10px;
            font-size: 0.8rem;
            text-transform: uppercase;
            color: #666;
            font-weight: 600;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #333;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(17, 153, 142, 0.1);
            color: #0d7377;
        }

        .nav-item.active {
            background: rgba(17, 153, 142, 0.2);
            color: #0d7377;
            font-weight: 600;
        }

        .nav-item i {
            margin-right: 10px;
            width: 20px;
        }

        .main-content {
            margin-left: 250px;
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #0d7377;
            margin-bottom: 5px;
        }

        .header p {
            color: #666;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #0d7377;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .content-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            color: #0d7377;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .action-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .action-card {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(17, 153, 142, 0.3);
        }

        .action-card .icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .action-card h3 {
            margin-bottom: 10px;
        }

        .action-card p {
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .process-list {
            margin-top: 20px;
        }

        .process-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #11998e;
        }

        .process-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 10px;
        }

        .process-title {
            font-weight: 600;
            color: #333;
        }

        .process-status {
            background: #28a745;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .process-details {
            color: #666;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">🏢</div>
            <h2>Portal do Comprador</h2>
            <p>Gestão de processos licitatórios</p>
        </div>

        <div class="nav-section">
            <h3>COMPRADOR</h3>
            <button class="nav-item active" onclick="showSection('dashboard')">
                <i class="fas fa-tachometer-alt"></i> Dashboard Comprador
            </button>
            <button class="nav-item" onclick="showSection('processos')">
                <i class="fas fa-folder-open"></i> Processos
            </button>
            <button class="nav-item" onclick="showSection('propostas')">
                <i class="fas fa-file-alt"></i> Propostas
            </button>
            <button class="nav-item" onclick="showSection('relatorios')">
                <i class="fas fa-chart-bar"></i> Relatórios
            </button>
        </div>

        <div class="nav-section">
            <h3>SISTEMA</h3>
            <button class="nav-item" onclick="voltarSistema()">
                <i class="fas fa-home"></i> Voltar ao Sistema Principal
            </button>
            <button class="nav-item" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Sair
            </button>
        </div>
    </div>

    <div class="main-content">
        <div class="header">
            <h1>Dashboard Comprador</h1>
            <p>Gerencie processos licitatórios e análises comparativas</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalProcessos">0</div>
                <div class="stat-label">Processos Ativos</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalPropostas">0</div>
                <div class="stat-label">Propostas Recebidas</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalFornecedores">0</div>
                <div class="stat-label">Fornecedores Cadastrados</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalAnalises">0</div>
                <div class="stat-label">Análises Realizadas</div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard" class="content-section active">
            <h2 class="section-title">Painel Principal</h2>
            
            <div class="action-cards">
                <div class="action-card" onclick="showSection('processos')">
                    <div class="icon">📋</div>
                    <h3>Gerenciar Processos</h3>
                    <p>Criar e acompanhar processos licitatórios</p>
                </div>
                
                <div class="action-card" onclick="showSection('propostas')">
                    <div class="icon">📄</div>
                    <h3>Analisar Propostas</h3>
                    <p>Análise comparativa de propostas recebidas</p>
                </div>
                
                <div class="action-card" onclick="showSection('relatorios')">
                    <div class="icon">📊</div>
                    <h3>Relatórios</h3>
                    <p>Relatórios executivos e análises técnicas</p>
                </div>
            </div>
        </div>

        <!-- Processos Section -->
        <div id="processos" class="content-section">
            <h2 class="section-title">Processos Licitatórios</h2>
            
            <div class="process-list" id="processosList">
                <div class="process-item">
                    <div class="process-header">
                        <div class="process-title">Contratação de Serviços de TI</div>
                        <div class="process-status">ABERTO</div>
                    </div>
                    <div class="process-details">
                        <p><strong>Modalidade:</strong> Pregão | <strong>Prazo:</strong> 15/08/2025</p>
                        <p><strong>Valor Estimado:</strong> R$ 250.000,00</p>
                    </div>
                </div>
                
                <div class="process-item">
                    <div class="process-header">
                        <div class="process-title">Aquisição de Equipamentos</div>
                        <div class="process-status">ABERTO</div>
                    </div>
                    <div class="process-details">
                        <p><strong>Modalidade:</strong> Concorrência | <strong>Prazo:</strong> 20/08/2025</p>
                        <p><strong>Valor Estimado:</strong> R$ 180.000,00</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Propostas Section -->
        <div id="propostas" class="content-section">
            <h2 class="section-title">Propostas Recebidas</h2>
            
            <div id="propostasList">
                <p>Carregando propostas...</p>
            </div>
        </div>

        <!-- Relatórios Section -->
        <div id="relatorios" class="content-section">
            <h2 class="section-title">Relatórios e Análises</h2>
            
            <div class="action-cards">
                <div class="action-card">
                    <div class="icon">📈</div>
                    <h3>Análise Comparativa</h3>
                    <p>Comparação técnica e comercial de propostas</p>
                </div>
                
                <div class="action-card">
                    <div class="icon">📋</div>
                    <h3>Relatório Executivo</h3>
                    <p>Resumo executivo para tomada de decisão</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Verificar autenticação ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            const user = localStorage.getItem('comprador_user');
            if (!user) {
                alert('Acesso negado. Faça login primeiro.');
                window.location.href = '/static/login-comprador.html';
                return;
            }

            // Carregar dados do usuário
            const userData = JSON.parse(user);
            console.log('Usuário logado:', userData.nome);

            // Carregar dados iniciais
            carregarEstatisticas();
            carregarPropostas();
        });

        // Função para mostrar seções
        function showSection(sectionId) {
            // Esconder todas as seções
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // Remover classe active de todos os nav-items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Mostrar seção selecionada
            document.getElementById(sectionId).classList.add('active');

            // Adicionar classe active ao nav-item correspondente
            event.target.classList.add('active');
        }

        // Carregar estatísticas
        function carregarEstatisticas() {
            // Simular dados
            document.getElementById('totalProcessos').textContent = '2';
            document.getElementById('totalPropostas').textContent = '3';
            document.getElementById('totalFornecedores').textContent = '3';
            document.getElementById('totalAnalises').textContent = '1';
        }

        // Carregar propostas
        function carregarPropostas() {
            const propostas = localStorage.getItem('propostas_fornecedores');
            const propostasList = document.getElementById('propostasList');

            if (propostas) {
                const propostasData = JSON.parse(propostas);
                let html = '';

                propostasData.forEach(proposta => {
                    html += `
                        <div class="process-item">
                            <div class="process-header">
                                <div class="process-title">${proposta.processo}</div>
                                <div class="process-status">RECEBIDA</div>
                            </div>
                            <div class="process-details">
                                <p><strong>Fornecedor:</strong> ${proposta.fornecedor}</p>
                                <p><strong>Valor:</strong> R$ ${proposta.valor}</p>
                                <p><strong>Prazo:</strong> ${proposta.prazo} dias</p>
                                <p><strong>Data:</strong> ${proposta.data}</p>
                            </div>
                        </div>
                    `;
                });

                propostasList.innerHTML = html;
            } else {
                propostasList.innerHTML = '<p>Nenhuma proposta recebida ainda.</p>';
            }
        }

        // Função para voltar ao sistema principal
        function voltarSistema() {
            window.location.href = '/';
        }

        // Função para logout
        function logout() {
            if (confirm('Deseja realmente sair do sistema?')) {
                localStorage.removeItem('comprador_user');
                window.location.href = '/';
            }
        }
    </script>
</body>
</html>
