services:
  # Web Service Principal
  - type: web
    name: sistema-propostas
    env: python
    region: oregon
    plan: free
    
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
    
    startCommand: python backend_render_fix.py
    
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      
      - key: RENDER
        value: "true"
      
      - key: FLASK_ENV
        value: production
      
      - key: SECRET_KEY
        generateValue: true
      
      - key: JWT_SECRET_KEY
        generateValue: true
      
      - key: MAIL_USERNAME
        sync: false
      
      - key: MAIL_PASSWORD
        sync: false
      
      - key: MAIL_SERVER
        value: smtp.gmail.com
      
      - key: MAIL_PORT
        value: "587"
      
      - key: LOG_LEVEL
        value: INFO
      
      - key: MAX_CONTENT_LENGTH
        value: "16777216"
      
      - key: DEBUG
        value: "False"
      
      - key: EMAIL_SUPRIMENTOS
        value: suprimentos@empresa.com
    
    autoDeploy: true
    
    # Health check
    healthCheckPath: /api/auth/verify
    
    # IMPORTANTE: Disco persistente para SQLite e uploads
    disk:
      name: sistema-propostas-data
      mountPath: /opt/render/persistent
      sizeGB: 1

# NÃO usar banco PostgreSQL - o sistema usa SQLite
# Remover toda a seção databases e staticSites
